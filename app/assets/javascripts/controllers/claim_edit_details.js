angular.module("moBilling.controllers")

    .controller("ClaimEditDetailsController", function ($scope) {
        var claim = $scope.claim;

        $scope.add = function (attributes) {
            claim.daily_details.push(angular.extend({ autogenerated: false, time_in: null, time_out: null }, attributes));
        };

        $scope.remove = function (detail) {
            var index = claim.daily_details.indexOf(detail);

            claim.daily_details.splice(index, 1);
        };

        $scope.isConsultTimeVisible = function (detail) {
            var code = detail.code || "";
            code = code.slice(0, 5).toUpperCase();
            if ("ABC".indexOf(code[4]) === -1) {
                code = code.slice(0, 4) + 'A';
            }

            return ["A130A", "C130A", "A600A", "C600A", "A911A", "C911A", "A912A", "C912A"].indexOf(code) !== -1;
        };
    });
