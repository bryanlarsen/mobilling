angular.module("moBilling.controllers")

    .controller("ClaimEditDetailsController", function ($scope) {
        var claim = $scope.claim;
        $scope.activated = {
            index: null
        }

        $scope.add = function (attributes) {
            claim.daily_details.push(angular.extend({ autogenerated: false, time_in: null, time_out: null }, attributes));
            $scope.activated.index = claim.daily_details.length - 1;
        };

        $scope.index = function(detail) {
            return claim.daily_details.indexOf(detail);
        };

        $scope.remove = function (detail) {
            claim.daily_details.splice($scope.index(detail), 1);
        };

        // FIXME: move to ClaimEditDetailController
        $scope.isConsultTimeVisible = function (detail) {
            var code = detail.code || "";

            return ["A130A", "C130A", "A600A", "C600A", "A911A", "C911A", "A912A", "C912A"].indexOf(code) !== -1;
        };
    });
